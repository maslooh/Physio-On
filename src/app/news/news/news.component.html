<div class="p-5 font-300 section news" id="news">
  <h1 *ngIf="hasMoreNewsBtn" class="card-title section-title my-4 ps-3">
    NEWS & ARTICLES
    <a
      pButton
      *ngIf="authService.isLoggedIn()"
      pRipple
      type="button"
      icon="pi pi-plus"
      routerLink="news/add"
      class="p-button-rounded text-decoration-none p-button-success text-dark p-button-text"
    ></a>
  </h1>
  <div class="vertical-center">
    <div
      *ngIf="
        isLoading;
        then loading;
        else newsList.length > 0 ? newsCard : noData
      "
    ></div>
    <div class="vertical-center">
      <a
        pButton
        pRipple
        type="button"
        label="More News"
        *ngIf="hasMoreNewsBtn"
        routerLink="news/list"
        class="mt-4 p-button-rounded p-button-secondary p-button-text text-decoration-underline text-dark flex-row"
      ></a>
    </div>
    <p-paginator
      *ngIf="hasPagination"
      [rows]="3"
      styleClass="news-paginator pb-0"
      [totalRecords]="totalNewsCount"
      [showPageLinks]="false"
      [showJumpToPageDropdown]="true"
      (onPageChange)="onPageChange($event)"
    ></p-paginator>
  </div>
</div>

<ng-template #actions>
  <div *ngIf="authService.isLoggedIn()" class="news-card-actions btns">
    <button
      pButton
      pRipple
      type="button"
      icon="pi pi-pencil"
      class="p-button-rounded news-image-actions-item p-button-success text-dark p-button-text"
    ></button>
    <button
      pButton
      pRipple
      type="button"
      icon="pi pi-trash"
      class="p-button-rounded news-image-actions-item p-button-success text-dark p-button-text"
    ></button></div
></ng-template>

<ng-template #noData>
  <h2 class="text-muted text-center mt-5">No news for now.</h2>
</ng-template>

<ng-template #newsCard>
  <div
    *ngFor="let news of newsList | slice: paginateStart:paginateEnd; odd as odd"
    class="card news-card col-12 col-md-11 mx-4 mb-4"
  >
    <div class="news-card-container row g-0">
      <div
        *ngIf="news.image && (odd || window.innerWidth <= 768)"
        class="col-md-5 news-card-image vertical-center"
      >
        <img [src]="news.image" class="img-fluid" alt="..." />
      </div>
      <div
        class="{{
          news.image ? 'col-md-7' : 'col-12'
        }} news-card-body position-relative h-100"
      >
        <div class="card-body">
          <h5 class="card-title news-card-title">
            {{ news.title | titlecase }}
          </h5>
          <div class="text-muted">
            {{ news.lastModified.toDate() | date }}
          </div>
          <div
            class="card-text ql-editor"
            [innerHtml]="news.content | safeHTML"
          ></div>
          <app-read-more route="news/{{ news.id }}"></app-read-more>
        </div>
      </div>
      <div
        *ngIf="!odd && window.innerWidth > 768 && news.image"
        class="col-md-5 news-card-image vertical-center"
      >
        <img [src]="news.image" class="img-fluid" alt="..." />
      </div>
    </div>
    <ng-container *ngTemplateOutlet="actions"></ng-container>
  </div>
</ng-template>

<ng-template #loading>
  <div
    *ngFor="let news of [1, 2, 3]; odd as odd"
    class="card skeleton news-card col-12 col-md-11 mx-4 mb-4"
  >
    <div class="news-card-container row g-0">
      <div
        *ngIf="odd || window.innerWidth <= 768"
        class="col-md-5 news-card-image vertical-center"
      >
        <div class="col-12 h-100">
          <p-skeleton height="100%"></p-skeleton>
        </div>
      </div>
      <div class="col-md-7 news-card-body position-relative h-100">
        <div class="card-body">
          <p-skeleton styleClass="mb-3" width="40%" height="1rem"></p-skeleton>
          <p-skeleton styleClass="mb-2" width="85%" height="1rem"></p-skeleton>
          <p-skeleton styleClass="mb-2" width="90%" height="1rem"></p-skeleton>
          <p-skeleton styleClass="mb-2" width="90%" height="1rem"></p-skeleton>
          <p-skeleton styleClass="mb-2" width="90%" height="1rem"></p-skeleton>
          <p-skeleton styleClass="mb-2" width="90%" height="1rem"></p-skeleton>
        </div>
      </div>
      <div
        *ngIf="!odd && window.innerWidth > 768"
        class="col-md-5 news-card-image vertical-center"
      >
        <div class="col-12 h-100">
          <p-skeleton height="100%"></p-skeleton>
        </div>
      </div>
    </div>
  </div>
</ng-template>
