<div class="p-5 font-300 section news" id="news">
  <h1 *ngIf="hasMoreNewsBtn" class="card-title section-title my-4 ps-3">
    NEWS & ARTICLES
    <a
      pButton
      *ngIf="authService.isLoggedIn()"
      pRipple
      type="button"
      icon="pi pi-plus"
      routerLink="news/add"
      class="p-button-rounded text-decoration-none p-button-success text-dark p-button-text"
    ></a>
  </h1>
  <div *ngIf="newsList.length > 0; else noData">
    <div
      *ngFor="
        let news of newsList | slice: paginateStart:paginateEnd;
        odd as odd
      "
      class="card news-card mb-4"
    >
      <div class="news-card-container row g-0">
        <div
          *ngIf="news.image && (odd || window.innerWidth <= 768)"
          class="col-md-5 py-2 {{
            odd || window.innerWidth <= 768 ? 'left-actions' : ''
          }} news-card-image vertical-center"
        >
          <img [src]="news.image" class="img-fluid" alt="..." />
          <ng-container *ngTemplateOutlet="actions"></ng-container>
        </div>
        <div class="col-md-7 news-card-body position-relative h-100">
          <div class="card-body">
            <h3 class="card-title news-card-title">
              {{ news.title | titlecase }}
            </h3>
            <div class="text-muted">
              {{ news.lastModified.toDate() | date }}
            </div>
            <div
              class="card-text ql-editor"
              [innerHtml]="news.content | safeHTML"
            ></div>
            <app-read-more route="news/{{ news.id }}"></app-read-more>
          </div>
        </div>
        <div
          *ngIf="!odd && window.innerWidth > 768 && news.image"
          class="col-md-5 py-2 news-card-image vertical-center"
        >
          <img [src]="news.image" class="img-fluid" alt="..." />
          <ng-container *ngTemplateOutlet="actions"></ng-container>
        </div>
      </div>
    </div>
    <div class="vertical-center">
      <a
        pButton
        pRipple
        type="button"
        label="More News"
        *ngIf="hasMoreNewsBtn"
        routerLink="news/list"
        class="mt-4 p-button-rounded p-button-secondary p-button-text text-decoration-underline text-dark flex-row"
      ></a>
    </div>
    <p-paginator
      *ngIf="hasPagination"
      [rows]="3"
      styleClass="news-paginator pb-0"
      [totalRecords]="totalNewsCount"
      [showPageLinks]="false"
      [showJumpToPageDropdown]="true"
      (onPageChange)="onPageChange($event)"
    ></p-paginator>
  </div>
</div>

<ng-template #actions>
  <div *ngIf="authService.isLoggedIn()" class="news-card-image-actions btns">
    <button
      pButton
      pRipple
      type="button"
      icon="pi pi-pencil"
      class="p-button-rounded news-image-actions-item p-button-success text-dark p-button-text"
    ></button>
    <button
      pButton
      pRipple
      type="button"
      icon="pi pi-trash"
      class="p-button-rounded news-image-actions-item p-button-success text-dark p-button-text"
    ></button></div
></ng-template>

<ng-template #noData>
  <h2 class="text-muted text-center">No news for now.</h2>
</ng-template>
